version: "3"
services:
  pgorigin:
    image: splitgraphci/pgorigin
    environment:
      - ORIGIN_USER=originro
      - ORIGIN_PASS=originpass
      - ORIGIN_PG_DB=origindb
    expose:
      - 5432
    volumes:
      - ./data/pgorigin:/src
  mongoorigin:
    image: splitgraphci/mongoorigin
    ports:
      - "0.0.0.0:27017:27017"
    environment:
      - ORIGIN_USER=originro
      - ORIGIN_PASS=originpass
      - ORIGIN_MONGO_DB=origindb
    expose:
      - 27017
    volumes:
      - ./data/mongoorigin:/src
  local_driver:
    image: splitgraph/driver
    ports:
      - "0.0.0.0:5432:5432"
    environment:
      - POSTGRES_USER=clientuser
      - POSTGRES_PASSWORD=supersecure
      - POSTGRES_DB=cachedb
    expose:
      - 5432
  remote_driver:
    build:
      context:  ./src/
      dockerfile: remote_driver/Dockerfile
    ports:
      - "0.0.0.0:5431:5431"
    environment:
      - POSTGRES_USER=clientuser
      - POSTGRES_PASSWORD=supersecure
      - POSTGRES_DB=cachedb
      - PGPORT=5431
    expose:
      - 5431
  ci_pgorigin:
    image: splitgraphci/pgorigin
    build: ./src/pgorigin
  ci_mongoorigin:
    image: splitgraphci/mongoorigin
    build: ./src/mongoorigin
